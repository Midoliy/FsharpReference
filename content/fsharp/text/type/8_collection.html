<!DOCTYPE html>
<html lang="ja">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143164157-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-143164157-1');
    </script>
    


    <!-- Google Adsense -->
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-5419541141241701",
            enable_page_level_ads: true
        });
    </script>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- Normal -->
        <ins class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-5419541141241701"
            data-ad-slot="1814399841"
            data-ad-format="auto"
            data-full-width-responsive="true"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    

    <!-- Vue.js -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->

    <!-- コードハイライトライブラリ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/vs.min.css">
    <script src="../../../../lib/highlight.pack.js"></script>    
    <script>hljs.initHighlightingOnLoad();</script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="google-site-verification" content="09hfklx0xyk42C60Ah0xvRFySTBGutqeAlcYIgZrI9A" />
    <meta name="keywords" content="F,F#,Ｆ＃,Ｆ,FSharp,F-Sharp,collection,コレクション,コレクション型,リスト,配列,seq,map,set,list,array,Midoliy">

    <title>Midoliy |> F# - コレクション型</title>

    <!-- CSS -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link rel="stylesheet" href="../../../../css/text-page.css">

</head>

<body>
    <header>
        <div class="icon">
            <a href="../../index.html" title="F#-TOPへ">
                <div>F#コレクション型</div>
            </a>
            <div>Midoliy｜F#プログラミング</div>
        </div>
    </header>

    <section>
        <!-- index-column -->
        <div class="content-list">
            <div><a href="#コレクションの概要">
                <i class="fas fa-edit"> コレクションの概要</i>
            </a></div>
            <div><a href="#F#コレクション型一覧">
                <i class="fas fa-edit"> F#コレクション型一覧</i>
            </a></div>
            <div><a href="#list&lt;'T&gt;">
                <i class="fas fa-edit"> list&lt;'T&gt;</i>
            </a></div>
            <div><a href="#array&lt;'T&gt;">
                <i class="fas fa-edit"> array&lt;'T&gt;</i>
            </a></div>
            <div><a href="#seq&lt;'T&gt;">
                <i class="fas fa-edit"> seq&lt;'T&gt;</i>
            </a></div>
            <div><a href="#map&lt;'TKey,'TValue&gt;">
                <i class="fas fa-edit"> map&lt;'TKey, 'TValue&gt;</i>
            </a></div>
            <div><a href="#set&lt;'T&gt;">
                <i class="fas fa-edit"> set&lt;'T&gt;</i>
            </a></div>
        </div>
        
        <!-- content-column -->
        <div class="content">

            <!-- ------------------ -->
            <!--  コレクションの概要  -->
            <!-- ------------------ -->
            <h1 id="コレクションの概要"><i class="fas fa-edit"> コレクションの概要</i></h1>
            <div>
                <br>

                　F＃には、様々なコレクション型が用意されています。コレクションにはそれぞれの型によって向き・不向きが存在しています。F#コレクションを利用する際は、ニーズによって適切なコレクション型を選択するようにしましょう。<br>
                　また、F#コレクションは .NET の System.Collections/System.Collections.Generics名前空間 に定義されているコレクション型とは別に定義されています。これは、F#コレクション型がオブジェクト指向ではなく関数型プログラミングの観点から設計されているためです。より具体的には、配列コレクション(= array)のみが要素の再代入が可能となっています(= mutable)。それ以外のF#コレクションでは元のコレクションの要素に対して再代入はできず、要素を変更した場合は新しいコレクションインスタンスが作成されます。<br>
            
                <br>
            </div>

            <br>

            <!-- -------------------- -->
            <!--  F#コレクション型一覧  -->
            <!-- -------------------- -->
            <h1 id="F#コレクション型一覧"><i class="fas fa-edit"> F#コレクション型一覧</i></h1>
            <div>
                <br>

                次の表はF#コレクション型を表しています。<br>
                <br>

                <table class="list-table">

                    <thead>
                        <tr>
                            <th><span>型</span></th>
                            <th><span>概要</span></th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td><span><a href="https://msdn.microsoft.com/visualfsharpdocs/conceptual/collections.list%5b%27t%5d-union-%5bfsharp%5d" target="_blank" class="ref"><b>list&lt;'T&gt;</b></a></span></td>
                            <td><span>すべてが同じ型であり、順序付けされた一連の <span class="keyword">immutable</span> な値を要素にもったコレクション。LinkedListとして実装されています。</span></td>
                        </tr>
                        <tr>
                            <td><span><a href="https://msdn.microsoft.com/visualfsharpdocs/conceptual/collections.array-module-%5bfsharp%5d" target="_blank" class="ref"><b>array&lt;'T&gt;</b></a></span></td>
                            <td><span>すべてが同じ型であり、連続した <span class="keyword">mutable</span> な値を要素にもった固定サイズのコレクション。</span></td>
                        </tr>
                        <tr>
                            <td><span><a href="https://msdn.microsoft.com/visualfsharpdocs/conceptual/collections.seq%5b%27t%5d-type-abbreviation-%5bfsharp%5d" target="_blank" class="ref"><b>seq&lt;'T&gt;</b></a></span></td>
                            <td><span>すべてが同じ型の論理的な一連の要素をもっているコレクション。seqは大規模な順序付けされたデータコレクションですが、必ずしもすべての要素をしようすることを期待していない場合に、特に便利です。個々のseq要素は必要に応じて計算されるため、すべての要素が使用されない場合、seq は list よりもパフォーマンスがよくなります。seq&lt;'T&gt;は、IEnumerable&lt;'T&gt; のエイリアスでもあります。そのため、.NETのコレクション型を seq&lt;'T&gt; として使用することも可能です。</span></td>
                        </tr>
                        <tr>
                            <td><span><a href="https://msdn.microsoft.com/visualfsharpdocs/conceptual/collections.map%5b%27key%2c%27value%5d-class-%5bfsharp%5d" target="_blank" class="ref"><b>map&lt;'TKey, 'TValue&gt;</b></a></span></td>
                            <td><span>immutableな要素を持つ辞書型コレクションです。要素はキーを利用してアクセスします。</span></td>
                        </tr>
                        <tr>
                            <td><span><span><a href="https://msdn.microsoft.com/visualfsharpdocs/conceptual/collections.set%5b%27t%5d-class-%5bfsharp%5d" target="_blank" class="ref"><b>set&lt;'T&gt;</b></a></span></td>
                            <td><span>2分木に基づいた、重複なしのimmutableな集合です。要素の比較はSystem.IComparableを利用して、同一性をチェックします。</span></td>
                        </tr>
                    </tbody>

                </table>

                <br>
            </div>

            <br>

            <!-- ---------- -->
            <!--  list<'T>  -->
            <!-- ---------- -->
            <h1 id="list&lt;'T&gt;"><i class="fas fa-edit"> list&lt;'T&gt;</i></h1>
            <div>
                <br>

                　list&lt;'T&gt;は <span class="keyword">連結リスト</span> (= Linked list) と言われるデータ構造をしているコレクション型です。array&lt;'T&gt;とは違い、すべての要素を書き換え不可なimmutableな値としてもっています。list&lt;'T&gt;は一般的に特定のインデックスの要素を取得したり、特定の要素の検索の実行に関しては低速であるため、注意が必要です。この特性を踏まえて利用しないと、プログラムの速度面でボトルネックとなりかねないため注意が必要です。<br>
                　次のサンプルは基本的な list&lt;'T&gt; の使い方を示しています。<br>
                <br>

                <div class="code"><script src="https://gist.github.com/Midoliy/3eebaa1f7f14ffb97bfad3ae99b06cee.js?file=List1.fs"></script></div>
                <br>

                　list&lt;'T&gt;には、リストを操作するための演算子も用意されています。<br>
                <br>
                
                <div class="code"><script src="https://gist.github.com/Midoliy/3eebaa1f7f14ffb97bfad3ae99b06cee.js?file=List2.fs"></script></div>
                <br>

                　また、list&lt;'T&gt;コレクションのよく使うような特定の値についてはプロパティが用意されています。<br>

                <br>
                <table class="list-table">
                    <thead>
                        <tr>
                            <th><span>プロパティ名</span></th>
                            <th><span>型</span></th>
                            <th><span>概要</span></th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td><span>Head</span></td>
                            <td><span>'T</span></td>
                            <td><span>最初の要素</span></td>
                        </tr>
                        <tr>
                            <td><span>Empty</span></td>
                            <td><span>'T list</span></td>
                            <td><span>空のリストを返す静的プロパティ</span></td>
                        </tr>
                        <tr>
                            <td><span>IsEmpty</span></td>
                            <td><span>bool</span></td>
                            <td><span>リストに要素がない場合, true</span></td>
                        </tr>
                        <tr>
                            <td><span>Item</span></td>
                            <td><span>'T</span></td>
                            <td><span>指定されたインデックスの要素を返す</span></td>
                        </tr>
                        <tr>
                            <td><span>Length</span></td>
                            <td><span>int</span></td>
                            <td><span>リストの要素数</span></td>
                        </tr>
                        <tr>
                            <td><span>Tail</span></td>
                            <td><span>'T list</span></td>
                            <td><span>最初の要素を除いたリスト</span></td>
                        </tr>
                    </tbody>
                </table>
                <br>

                <div class="code"><script src="https://gist.github.com/Midoliy/3eebaa1f7f14ffb97bfad3ae99b06cee.js?file=List3.fs"></script></div>
                <br>

                　また、list&lt;'T&gt;を操作するための便利な関数が <span class="keyword">Listモジュール</span> に集められています。詳細は <a href="https://msdn.microsoft.com/en-us/visualfsharpdocs/conceptual/collections.list-module-%5Bfsharp%5D" target="_blank" class="ref">Collections.Listモジュール</a>を参照ください。<br>

                <br>
            </div>

            <br>

            <!-- ----------- -->
            <!--  array<'T>  -->
            <!-- ----------- -->
            <h1 id="array&lt;'T&gt;"><i class="fas fa-edit"> array&lt;'T&gt;</i></h1>
            <div>
                <br>
                　array&lt;'T&gt; も list&lt;'T&gt; とほぼ同様の特性を持っています。しかし、各要素が書き換え可能なmutableな値であることと、特定のインデックスの要素を高速に取得できる点が大きく異なります。要素が immutable / mutable の違いに目が行きがちですが、要素アクセスの速度差もあることは頭に入れておいたほうがよいでしょう<br>
                　次のサンプルは基本的な array&lt;'T&gt; の使い方を示しています。<br>
                <br>

                <div class="code"><script src="https://gist.github.com/Midoliy/3eebaa1f7f14ffb97bfad3ae99b06cee.js?file=array1.fs"></script></div>
                <br>

                　また、array&lt;'T&gt;を操作するための便利な関数が <span class="keyword">Arrayモジュール</span> に集められています。詳細は <a href="https://msdn.microsoft.com/en-us/visualfsharpdocs/conceptual/collections.array-module-%5bfsharp%5d" target="_blank" class="ref">Collections.Arrayモジュール</a> を参照ください。<br>
            
                <br>
            </div>

            <br>

            <!-- --------- -->
            <!--  seq<'T>  -->
            <!-- --------- -->
            <h1 id="seq&lt;'T&gt;"><i class="fas fa-edit"> seq&lt;'T&gt;</i></h1>
            <div>
                <br>
                　seq&lt;'T&gt;は、1つの型に基づく論理的な一連のデータ群です。seq&lt;'T&gt;は大規模かつ順序付けされたデータの集まりですが、必ずしもすべての要素を使用するとは限らない場合に特に有効なコレクションです。個々の要素は必要に応じられたときにはじめて計算されるため、すべての要素が使用されるわけではない状況では、list&lt;'T&gt; や array&lt;'T&gt; よりも優れたパフォーマンスを得られます。<br>
                　seq&lt;'T&gt;は、IEnumerableインターフェースのエイリアスでもあります。そのため、.NETのコレクション型(= System.Collections or System.Collections.Generics)をseq&lt;'T&gt;として扱うことができます。また、<a href="https://msdn.microsoft.com/en-us/visualfsharpdocs/conceptual/collections.array-module-%5bfsharp%5d" target="_blank" class="ref">Collections.Arrayモジュール</a>はseq&lt;'T&gt;を伴う操作もサポートしています。<br>
                <br>

                <h3>シーケンス式</h3>
                <span>

                    　シーケンス式は seq&lt;'T&gt; に評価される式のことです。次のサンプルはシーケンス式の簡単な使い方を示しています。<br>
                    <br>

                    <div class="code"><script src="https://gist.github.com/Midoliy/3eebaa1f7f14ffb97bfad3ae99b06cee.js?file=seq1.fs"></script></div>

                </span>
                <br>

                　また、seq&lt;'T&gt;を操作するための便利な関数が <span class="keyword">Seqモジュール</span> に集められています。詳細は <a href="https://msdn.microsoft.com/visualfsharpdocs/conceptual/collections.seq-module-%5bfsharp%5d" target="_blank" class="ref">Collections.Seqモジュール</a>を参照ください。<br>
            
                <br>
            </div>

            <br>

            <!-- --------------------- -->
            <!--  map<'TKey, 'TValue>  -->
            <!-- --------------------- -->
            <h1 id="map&lt;'TKey,'TValue&gt;"><i class="fas fa-edit"> map&lt;'TKey, 'TValue&gt;</i></h1>
            <div>
                <br>

                　map&lt;'TKey, 'TValue&gt;は、いわゆる辞書型のデータ構造を持っている型です。辞書型のデータ構造とは、キーと値で1つの要素となります。キーを指定することで、値にアクセスすることができます。<br>
                　次のサンプルは基本的な map&lt;'TKey, 'TValue&gt; の使い方を示しています。<br>
                <br>

                <div class="code"><script src="https://gist.github.com/Midoliy/3eebaa1f7f14ffb97bfad3ae99b06cee.js?file=map1.fs"></script></div>
                <br>

                　また、map&lt;'TKey, 'TValue&gt;を操作するための便利な関数が <span class="keyword">Mapモジュール</span> に集められています。詳細は <a href="https://msdn.microsoft.com/visualfsharpdocs/conceptual/collections.map%5b%27key%2c%27value%5d-constructor-%5bfsharp%5d" target="_blank" class="ref">Collections.Mapモジュール</a>を参照ください。<br>
            
                <br>
            </div>

            <br>

            <!-- --------- -->
            <!--  set<'T>  -->
            <!-- --------- -->
            <h1 id="set&lt;'T&gt;"><i class="fas fa-edit"> set&lt;'T&gt;</i></h1>
            <div>
                <br>
                　set&lt;'T&gt;は、ハッシュテーブルを利用したデータ型です。重複する値を含まないコレクションを利用したい場合に便利です。値が重複するかどうかのチェックはSystem.IComparableインターフェースを利用して行われます。そのため、正しく動作させるには要素の型に対して、System.IComparableを正しく実装する必要があります。<br>
                　次のサンプルは基本的な set&lt;'T&gt; の使い方を示しています。<br>
                <br>

                <div class="code"><script src="https://gist.github.com/Midoliy/3eebaa1f7f14ffb97bfad3ae99b06cee.js?file=set1.fs"></script></div>
                <br>

                　また、set&lt;'T&gt;を操作するための便利な関数が <span class="keyword">Setモジュール</span> に集められています。詳細は <a href="https://msdn.microsoft.com/ja-jp/visualfsharpdocs/conceptual/collections.set-module-%5bfsharp%5d" target="_blank" class="ref">Collections.Setモジュール</a>を参照ください。<br>
            
                <br>
            </div>

            <br>

            <br>
        </div>
    </section>

    <footer>
        投稿日 : 2019/02/17
    </footer>
</body>

</html>